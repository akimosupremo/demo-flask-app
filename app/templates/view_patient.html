{% extends "layout.html" %}

{% set crumb_title = "View Patient" %}

{% block head_title %}View Patient{% endblock %}

{% block content %}
<div class="container my-5">
  <h1 class="text-center">{{ patient.name }}</h1>
  <p class="text-center">Date of Birth: {{ patient.dob }}</p>
  <p class="text-center">Diagnosis: {{ patient.diagnosis }}</p>

  <div class="d-flex justify-content-between my-3 mx-5">
    <button data-bs-target="#carouselExampleIndicators" type="button" data-bs-slide="prev" id="prevBtn"
      class="btn btn-secondary"> Previous</button>
    <button data-bs-target="#carouselExampleIndicators" type="button" data-bs-slide="next" id="nextBtn"
      class="btn btn-secondary">Next</button>
  </div>

  <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
      {% for i in range(image_files|length) %}
      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="{{i}}"
        {% if loop.first %}class="active" {% endif %}></button>
      {% endfor %}
    </div>
    <div class="carousel-inner">
      {% for i, image_file in enumerate(image_files) %}
      <div class="carousel-item {% if loop.first %}active{% endif %}">
        <img src="{{ url_for('static', filename=patient.id|string + '/images/' + image_file) }}" alt="Patient Image"
          class="d-block w-100">
        <div class="carousel-caption d-none d-md-block">
          <h5>Image Type: {{patient.medical_images[i].image_type}}</h5>
          <p>Date Acquired: {{patient.medical_images[i].date_acquired}}</p>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>

  {% endblock %}
